!function(){"use strict";function e(e){let t=document.querySelector(`.product[data-id="${e}"]`);if(!t)return 0;let i=t.querySelector(".subtotal-price");if(i){let n=i.textContent.trim();return parseFloat(n)||0}return 0}function t(e){let t={met:!0,hasStarted:!1,remainingTotal:0,remainingProduct:0,remainingTotalPrice:0,remainingProductPrice:0,productDetails:[],conditionResults:[]};if(!e.conditions)return t;if(e.conditions.multipleConditions&&Array.isArray(e.conditions.multipleConditions)){let n=e.conditions.combineLogic||"all",r=e.conditions.multipleConditions.map((e,n)=>{let r=i(e);return r.hasStarted&&(t.hasStarted=!0),{index:n,type:e.type,met:r.met,hasStarted:r.hasStarted,details:r}});if(t.conditionResults=r,"all"===n){let o=r.every(e=>e.met);t.met=o,r.forEach(e=>{!e.met&&(e.details.remainingTotal>0&&(t.remainingTotal=Math.max(t.remainingTotal,e.details.remainingTotal)),e.details.remainingProduct>0&&(t.remainingProduct=Math.max(t.remainingProduct,e.details.remainingProduct)),e.details.remainingTotalPrice>0&&(t.remainingTotalPrice=Math.max(t.remainingTotalPrice,e.details.remainingTotalPrice)),e.details.remainingProductPrice>0&&(t.remainingProductPrice=Math.max(t.remainingProductPrice,e.details.remainingProductPrice)),e.details.productDetails&&e.details.productDetails.length>0&&t.productDetails.push(...e.details.productDetails))})}else if("any"===n){let a=r.some(e=>e.met);if(t.met=a,!a){let c=r.filter(e=>!e.met),d=c.map(e=>e.details.remainingTotal).filter(e=>e>0);d.length>0&&(t.remainingTotal=Math.min(...d));let l=c.map(e=>e.details.remainingTotalPrice).filter(e=>e>0);l.length>0&&(t.remainingTotalPrice=Math.min(...l));let u=c.map(e=>e.details.remainingProduct).filter(e=>e>0);u.length>0&&(t.remainingProduct=Math.min(...u));let s=c.map(e=>e.details.remainingProductPrice).filter(e=>e>0);s.length>0&&(t.remainingProductPrice=Math.min(...s))}}return t}if(!e.conditions.type)return t;let m=i(e.conditions);return m}function i(t){let i={met:!0,hasStarted:!1,remainingTotal:0,remainingProduct:0,remainingTotalPrice:0,remainingProductPrice:0,productDetails:[]},n=t.type,r=t.productCombineLogic||t.combineLogic||"all";if("total"===n){let o=function e(){let t=document.querySelector(".total-quantity");return t&&parseInt(t.textContent)||0}(),a=t.minTotalQuantity||1;o>0&&(i.hasStarted=!0),o<a&&(i.met=!1,i.remainingTotal=a-o)}if("product"===n){if(t.requiredProducts&&Array.isArray(t.requiredProducts)){let c=t.requiredProducts.map(e=>{let t=b(e.id),n=e.minQuantity||1;return t>0&&(i.hasStarted=!0),{id:e.id,currentQty:t,requiredQty:n,remaining:Math.max(0,n-t),met:t>=n}});if(i.productDetails=c,"all"===r){let d=c.every(e=>e.met);d||(i.met=!1,i.remainingProduct=Math.max(...c.map(e=>e.remaining)))}else if("any"===r){let l=c.some(e=>e.met);l||(i.met=!1,i.remainingProduct=Math.min(...c.filter(e=>e.remaining>0).map(e=>e.remaining)))}}else if(t.requiredProduct){let u=t.requiredProduct,s=b(u.id),m=u.minQuantity||1;s>0&&(i.hasStarted=!0),s<m&&(i.met=!1,i.remainingProduct=m-s),i.productDetails=[{id:u.id,currentQty:s,requiredQty:m,remaining:Math.max(0,m-s),met:s>=m}]}}if("price-total"===n){let p=function e(){let t=document.querySelector(".total-price");if(t){let i=t.textContent.trim();return parseFloat(i)||0}return 0}(),g=t.minTotalPrice||0;p>0&&(i.hasStarted=!0),p<g&&(i.met=!1,i.remainingTotalPrice=g-p)}if("price-product"===n){if(t.requiredProducts&&Array.isArray(t.requiredProducts)){let f=t.requiredProducts.map(t=>{let n=e(t.id),r=t.minPrice||0;return n>0&&(i.hasStarted=!0),{id:t.id,currentPrice:n,requiredPrice:r,remaining:Math.max(0,r-n),met:n>=r}});if(i.productDetails=f,"all"===r){let y=f.every(e=>e.met);y||(i.met=!1,i.remainingProductPrice=Math.max(...f.map(e=>e.remaining)))}else if("any"===r){let P=f.some(e=>e.met);P||(i.met=!1,i.remainingProductPrice=Math.min(...f.filter(e=>e.remaining>0).map(e=>e.remaining)))}}else if(t.requiredProduct){let v=t.requiredProduct,h=e(v.id),q=v.minPrice||0;h>0&&(i.hasStarted=!0),h<q&&(i.met=!1,i.remainingProductPrice=q-h),i.productDetails=[{id:v.id,currentPrice:h,requiredPrice:q,remaining:Math.max(0,q-h),met:h>=q}]}}return i}let n={bumpName:"{bumpName}",productName:"{productName}",productQuantity:"{productQuantity}",productPrice:"{productPrice}",currentProductQuantity:"{currentProductQuantity}",currentProductPrice:"{currentProductPrice}",remainingTotal:"{remainingTotal}",remainingProduct:"{remainingProduct}",remainingTotalPrice:"{remainingTotalPrice}",remainingProductPrice:"{remainingProductPrice}",totalQuantity:"{totalQuantity}",totalPrice:"{totalPrice}",conditions:"{conditions}"};function r(e,t,i){let r=e;return Object.values(n).forEach(e=>{if("{conditions}"===e)return;let n=RegExp(e.replace(/[{}]/g,"\\{\\}"),"g"),o=function e(t,i,n){let r=t.replace(/[{}]/g,"");switch(r){case"bumpName":return`<strong>${i.productName||"order bump"}</strong>`;case"productName":return function e(t,i){let n="produk";if(i.productDetails&&i.productDetails.length>0){let r=i.productDetails.map(e=>{let t=d(e.id);return t?.name||`Produk ${e.id}`});n=1===r.length?r[0]:2===r.length?r.join(" & "):r.slice(0,-1).join(", ")+" & "+r[r.length-1]}else if(t.conditions.requiredProduct){let o=d(t.conditions.requiredProduct.id);n=o?.name||`Produk ${t.conditions.requiredProduct.id}`}return`<strong>${n}</strong>`}(i,n);case"productQuantity":return`<strong>${n.productDetails?.[0]?.requiredQty||1}</strong>`;case"productPrice":return`<strong>${l(n.productDetails?.[0]?.requiredPrice||0)}</strong>`;case"currentProductQuantity":return`<strong>${n.productDetails?.[0]?.currentQty||0}</strong>`;case"currentProductPrice":return`<strong>${l(n.productDetails?.[0]?.currentPrice||0)}</strong>`;case"remainingTotal":return`<strong>${n.remainingTotal||0}</strong>`;case"remainingProduct":if(void 0!==n.remaining)return`<strong>${n.remaining}</strong>`;return`<strong>${n.remainingProduct||0}</strong>`;case"remainingTotalPrice":return`<strong>${l(n.remainingTotalPrice||0)}</strong>`;case"remainingProductPrice":if(void 0!==n.remaining)return`<strong>${l(n.remaining)}</strong>`;return`<strong>${l(n.remainingProductPrice||0)}</strong>`;case"totalQuantity":return`<strong>${function e(t){if(t.conditions.multipleConditions){let i=t.conditions.multipleConditions.find(e=>"total"===e.type&&e.minTotalQuantity);return i?.minTotalQuantity||0}return t.conditions.minTotalQuantity||0}(i)}</strong>`;case"totalPrice":return`<strong>${l(function e(t){if(t.conditions.multipleConditions){let i=t.conditions.multipleConditions.find(e=>"price-total"===e.type&&e.minTotalPrice);return i?.minTotalPrice||0}return t.conditions.minTotalPrice||0}(i))}</strong>`;case"conditions":return"{conditions}";default:return console.warn(`‚ö†Ô∏è Unknown placeholder: ${t}`),t}}(e,t,i);r=r.replace(n,o)}),r}function o(e,t,i,n=null){switch(e){case"total":return`${t.remainingTotal} item lagi`;case"price-total":return`${l(t.remainingTotalPrice)} lagi`;case"product":{if(t.productDetails&&t.productDetails.length>1){let o="all";if(i.conditions.multipleConditions){let a=i.conditions.multipleConditions.find(e=>"product"===e.type&&e.requiredProducts&&e.requiredProducts.length>1);a&&(o=a.productCombineLogic||a.combineLogic||"all")}else i.conditions.requiredProducts&&i.conditions.requiredProducts.length>1&&(o=i.conditions.productCombineLogic||i.conditions.combineLogic||"all");return function e(t,i,n){let o=window.cartConfig.notifications?.messages?.multipleProducts?.[t];if(!o)return`Tambah produk yang diperlukan untuk unlock ${i.productName}`;let a=o.heading||"Sila penuhi syarat berikut untuk unlock {bumpName}:";a=r(a,i,{});let c=o.itemTemplate||"Perlukan {productQuantity} unit {productName}. Sekarang ada {currentProductQuantity} unit dalam cart, perlu tambah lagi {remainingProduct} unit.",l=n.map((e,t)=>{let n=d(e.id);n?.name||e.id;let o={productDetails:[e],remaining:e.remaining,remainingProduct:e.remaining};return`<li>${r(c,{...i,conditions:{requiredProduct:{id:e.id}}},o)}</li>`}).join("");return`
        <div class="multi-product-notification">
            <div class="notification-heading">${a}</div>
            <ol class="notification-list">${l}</ol>
        </div>
    `}(o,i,t.productDetails)}let c="produk";if(i.conditions.multipleConditions){let u=i.conditions.multipleConditions.find(e=>"product"===e.type&&!!e.requiredProduct&&t.productDetails?.some(t=>t.id===e.requiredProduct.id));if(u?.requiredProduct){let s=d(u.requiredProduct.id);c=s?.name||`Produk ${u.requiredProduct.id}`}}else if(i.conditions.requiredProduct){let m=d(i.conditions.requiredProduct.id);c=m?.name||`Produk ${i.conditions.requiredProduct.id}`}return`${t.remainingProduct} ${c} lagi`}case"price-product":{if(t.productDetails&&t.productDetails.length>1){let p="all";if(i.conditions.multipleConditions){let g=i.conditions.multipleConditions.find(e=>"price-product"===e.type&&e.requiredProducts&&e.requiredProducts.length>1);g&&(p=g.productCombineLogic||g.combineLogic||"all")}else i.conditions.requiredProducts&&i.conditions.requiredProducts.length>1&&(p=i.conditions.productCombineLogic||i.conditions.combineLogic||"all");return function e(t,i,n){let o=window.cartConfig.notifications?.messages?.multipleProducts?.[t];if(!o)return`Tambah harga produk yang diperlukan untuk unlock ${i.productName}`;let a=o.priceHeading||o.heading||"Sila penuhi syarat berikut untuk unlock {bumpName}:";a=r(a,i,{});let c=o.priceItemTemplate||"Perlukan {productPrice} untuk {productName}. Sekarang ada {currentProductPrice} dalam cart, perlu tambah lagi {remainingProductPrice}.",l=n.map((e,t)=>{let n=d(e.id);n?.name||e.id;let o={productDetails:[e],remaining:e.remaining,remainingProductPrice:e.remaining};return`<li>${r(c,{...i,conditions:{requiredProduct:{id:e.id}}},o)}</li>`}).join("");return`
        <div class="multi-product-notification">
            <div class="notification-heading">${a}</div>
            <ol class="notification-list">${l}</ol>
        </div>
    `}(p,i,t.productDetails)}let f="produk";if(i.conditions.multipleConditions){let b=i.conditions.multipleConditions.find(e=>"price-product"===e.type&&!!e.requiredProduct&&t.productDetails?.some(t=>t.id===e.requiredProduct.id));if(b?.requiredProduct){let y=d(b.requiredProduct.id);f=y?.name||`Produk ${b.requiredProduct.id}`}}else if(i.conditions.requiredProduct){let P=d(i.conditions.requiredProduct.id);f=P?.name||`Produk ${i.conditions.requiredProduct.id}`}return`${l(t.remainingProductPrice)} lagi untuk ${f}`}default:return""}}function a(e){return 0===e.length?null:e.reduce((e,t)=>{let i=c(e.details),n=c(t.details);return n<i?t:e})}function c(e){let t=[e.remainingTotal,e.remainingProduct,e.remainingTotalPrice,e.remainingProductPrice].filter(e=>e>0);return t.length>0?Math.min(...t):1/0}function d(e){let t=document.querySelector(`.product[data-id="${e}"]`);if(!t)return console.warn(`Product with ID ${e} not found`),null;let i=t.querySelector("td:first-child"),n=i?i.textContent.trim():"";return window.cartConfig.debugMode&&console.log(`üì¶ Product ${e} found:`,n),{id:e,name:n}}function l(e){let t=e.toFixed(window.cartConfig.currency.decimalPlaces);return"before"===window.cartConfig.currency.position?`${window.cartConfig.currency.symbol}${t}`:`${t}${window.cartConfig.currency.symbol}`}function u(e){return e}function s(e,t){return e-t}function m(e,t){var i,n;let r=(i=t.originalPrice,i-(n=t.discountedPrice)),o=t.savingsText.replace("{amount}",l(r)),a={"{productName}":{value:t.productName,class:"bump-product-name"},"{oldPrice}":{value:l(t.originalPrice),class:"bump-price-old"},"{newPrice}":{value:l(t.discountedPrice),class:"bump-price-new"},"{savings}":{value:o,class:"bump-save"}},c=e;return Object.entries(a).forEach(([e,t])=>{let i=RegExp(e.replace(/[{}]/g,"\\$&"),"gi");c=c.replace(i,`<span class="${t.class}">${t.value}</span>`)}),c}function p(e){if(e.productId){let t=d(e.productId);t&&(e.productName||(e.productName=t.name),t.price&&!e.discountedPrice&&(e.discountedPrice=t.price))}return e.productName?e.discountedPrice?e:(console.error("Order bump missing discountedPrice:",e),null):(console.error("Order bump missing productName:",e),null)}function g(e,t){let i=window.cartConfig.orderBumps[e];if(!i||!i.productId)return console.warn(`Order bump ${e} tidak mempunyai productId`),!1;let n=document.querySelector(`.product[data-id="${i.productId}"]`);if(!n)return console.warn(`Product dengan ID ${i.productId} tidak dijumpai`),!1;let r=n.querySelector("select.quantity");return!!r&&(r.dataset.fromBump="true","undefined"!=typeof $&&$.fn.select2?($(r).val(t.toString()),$(r).trigger("change.select2"),setTimeout(()=>{let e=new Event("input",{bubbles:!0});r.dispatchEvent(e)},50)):(r.value=t.toString(),r.dispatchEvent(new Event("change",{bubbles:!0})),r.dispatchEvent(new Event("input",{bubbles:!0}))),window.cartConfig.debugMode&&console.log(`‚úÖ Product ${i.productId} (${i.productName}) quantity set to: ${t}`),!0)}function f(){let e=window.cartConfig.orderBumpsLocation,t=null,i="beforebegin";switch(e.position){case"before-payment":default:t=document.getElementById("payment-section"),i="beforebegin";break;case"after-products":t=document.querySelector(".table.table-condensed.purchase_details:not(.table-hover)"),i="afterend";break;case"before-customer":t=document.querySelector("h2.section-header"),i="beforebegin";break;case"custom":t=document.querySelector(e.customSelector),i=e.insertMethod||"afterend"}return t||(console.error(`‚ùå Order bump target element not found for position: ${e.position}`),t=document.getElementById("payment-section"),i="beforebegin"),window.cartConfig.debugMode&&console.log(`üìç Order bump insert target:`,{position:e.position,element:t,method:i}),{targetElement:t,insertMethod:i}}function b(e){let t=document.querySelector(`.product[data-id="${e}"]`);if(!t)return 0;let i=t.querySelector("select.quantity");return i&&parseInt(i.value)||0}function y(e){let i=t(e);return i.met}function P(){window.cartConfig.orderBumps.forEach((e,i)=>{e.enabled&&function e(i){let n=window.cartConfig.orderBumps[i];if(!n||!n.enabled)return;let c=document.querySelector(`.order-bump-container[data-bump-index="${i}"]`);if(!c)return;let d=t(n),l=d.met,u=d.hasStarted;!function e(t,i){if(!window.cartConfig.notifications.enabled)return;let n=window.cartConfig.orderBumps[t];if(!n||!n.conditions)return;let c=`bump-notification-${t}`,d=document.getElementById(c),l=document.querySelector(`.order-bump-container[data-bump-index="${t}"]`);if(i.met){if(d){if(window.cartConfig.notifications.showSuccessMessage){let u;u=n.customMessages&&n.customMessages.success?r(n.customMessages.success,n,{met:!0}):function e(t,i,n){let o=window.cartConfig.notifications?.messages||{};if(n&&n.conditions&&n.conditions.multipleConditions){let a=n.conditions.combineLogic||"all",c=o.multiple?.[a],d=null;if("object"==typeof c&&c.success&&(d=c.success),d)return r(d,n,{met:!0});let l=o.multiple?.success||"Tahniah! Anda layak untuk {bumpName} pada harga diskaun";return r(l,n,{met:!0})}return console.error("‚ùå Invalid condition format. Please use multipleConditions."),`Tahniah! Anda layak untuk <strong>${i}</strong>`}(n.conditions.type,n.productName,n),d.className="order-bump-notification success",d.innerHTML=`
                    <div class="order-bump-notification-content">
                        <div class="order-bump-notification-icon">
                            <i class="fa fa-check"></i>
                        </div>
                        <div class="order-bump-notification-text">
                            <div class="order-bump-notification-message">${u}</div>
                        </div>
                    </div>
                `,setTimeout(()=>{d&&d.parentNode&&(d.style.animation="slideInNotification 0.3s ease reverse",setTimeout(()=>{d&&d.parentNode&&d.remove()},300))},5e3)}else d&&d.parentNode&&d.remove()}return}if(!i.met&&i.hasStarted){let s;if(n.customMessages&&n.customMessages.pending){if((s=r(n.customMessages.pending,n,i)).includes("{conditions}")){let m=function e(t,i){let n=t.conditions.combineLogic||"all",r=i.conditionResults?.filter(e=>!e.met)||[];if("all"===n){let c=r.map(e=>o(e.type,e.details,t,i)).filter(e=>e);if(0===c.length)return"";let d=c.map(e=>e.includes('<div class="multi-product-notification">')?e:`<strong>${e}</strong>`);return 1===d.length?d[0]:2===d.length?d.join(" & "):d.slice(0,-1).join(", ")+" & "+d[d.length-1]}if("any"===n){let l=a(r);if(!l)return"";let u=o(l.type,l.details,t,i);return u.includes('<div class="multi-product-notification">')?u:`<strong>${u}</strong>`}return""}(n,i);s=s.replace(/{conditions}/g,m)}}else s=function e(t,i,n){let r=window.cartConfig.notifications?.messages||{};if(!i.conditions.multipleConditions)return console.error("‚ùå Invalid condition format. Order bumps MUST use multipleConditions array."),console.info('Example:\n{\n  multipleConditions: [\n    { type: "total", minTotalQuantity: 5 },\n    { type: "product", requiredProduct: { id: 1, minQuantity: 2 }}\n  ],\n  combineLogic: "all"\n}'),`‚ö†Ô∏è Invalid configuration for ${i.productName}`;let c=i.conditions.combineLogic||"all",d=n.conditionResults?.filter(e=>!e.met)||[],l=r.multiple?.[c],u=null;if("string"==typeof l?u=l:l&&"object"==typeof l&&(u=l.pending),u||(u=({all:"Sila penuhi semua syarat: {conditions} untuk unlock {bumpName}",any:"Penuhi salah satu syarat: {conditions} untuk unlock {bumpName}"})[c]),"all"===c){let s=d.map(e=>o(e.type,e.details,i,n)).filter(e=>e);if(0===s.length)return`Unlock ${i.productName}`;let m=s.map(e=>e.includes('<div class="multi-product-notification">')?e:`<strong>${e}</strong>`),p="";return p=1===m.length?m[0]:2===m.length?m.join(" & "):m.slice(0,-1).join(", ")+" & "+m[m.length-1],u.replace(/{conditions}/g,p).replace(/{bumpName}/g,`<strong>${i.productName}</strong>`)}if("any"===c){let g=a(d);if(!g)return`Unlock ${i.productName}`;let f=o(g.type,g.details,i,n);return f.includes('<div class="multi-product-notification">')?f:u.replace(/{conditions}/g,`<strong>${f}</strong>`).replace(/{bumpName}/g,`<strong>${i.productName}</strong>`)}return console.warn(`‚ö†Ô∏è Unknown combineLogic: ${c}. Using fallback.`),`Unlock ${i.productName}`}(n.conditions.type,n,i);if(!d){if((d=document.createElement("div")).id=c,d.className="order-bump-notification",l)l.insertAdjacentElement("beforebegin",d);else{let{targetElement:p,insertMethod:g}=f();p&&p.insertAdjacentElement("beforebegin"===g?"beforebegin":"afterend",d)}}d.innerHTML=`
            <div class="order-bump-notification-content">
                <div class="order-bump-notification-text">
                    <div class="order-bump-notification-message">${s}</div>
                </div>
            </div>
        `}else d&&d.parentNode&&d.remove()}(i,d);let s=c.querySelector(".order-bump-input"),m=c.querySelector(".order-bump-quantity-wrapper");u||l?(c.style.display="block",l?(c.classList.remove("disabled"),s&&(s.disabled=!1),window.cartConfig.debugMode&&console.log(`Order bump ${i} ENABLED (conditions met)`)):(c.classList.add("disabled"),s&&(s.disabled=!0,s.checked&&(s.checked=!1,s.dispatchEvent(new Event("change",{bubbles:!0})))),m&&(m.style.display="none"),window.cartConfig.debugMode&&console.log(`\xf0≈∏"' Order bump ${i} shown but DISABLED (conditions not met)`))):(c.style.display="none",s&&s.checked&&(s.checked=!1,s.dispatchEvent(new Event("change",{bubbles:!0}))),window.cartConfig.debugMode&&console.log(`Order bump ${i} hidden (user hasn't started ordering)`))}(i)})}document.addEventListener("DOMContentLoaded",function(){!function e(){if(!window.cartConfig){console.error("cartConfig not found! Please define window.cartConfig before loading this script.");return}!function e(){let t=`
        <div class="cart-container">
            <div class="left-section">
                <i class="fa fa-shopping-cart" id="cartQty" data-count="0"></i>
                <span class="cart-total">0.00</span>
            </div>
            <div class="right-section">
                <button id="cart-toggle-btn">
                    <span class="toggle-btn-txt">TEMPAH SEKARANG</span>
                    <i class="fa fa-times"></i>
                </button>
            </div>
        </div>
        <div id="form-overlay"></div>
    `;document.body.insertAdjacentHTML("beforeend",t)}();let t=document.getElementById("form"),i=document.getElementById("cart-toggle-btn"),n=document.getElementById("cartQty"),r=document.getElementById("form-overlay");function o(){let e=document.querySelector(".total-quantity");if(e){let t=parseInt(e.textContent)||0;n.setAttribute("data-count",t)}}i.addEventListener("click",function(){t.classList.toggle("active"),i.classList.toggle("active"),r.classList.toggle("active")}),r.addEventListener("click",function(){t.classList.remove("active"),i.classList.remove("active"),r.classList.remove("active")});let a=document.querySelector(".total-quantity");if(a){o();let c=new MutationObserver(o);c.observe(a,{childList:!0,characterData:!0,subtree:!0})}function d(){let e=document.querySelector(".total-amount"),t=document.querySelector(".cart-total");if(e&&t){let i=e.textContent.trim();t.textContent=i}}let l=document.querySelector(".total-amount");if(l){d();let u=new MutationObserver(d);u.observe(l,{childList:!0,characterData:!0,subtree:!0})}document.querySelectorAll('input[type="radio"]').forEach(e=>{let t=document.createElement("div");t.className="checkbox-custom",e.insertAdjacentElement("afterend",t)})}();let e=document.querySelector(".toggle-btn-txt");e&&(e.textContent=window.cartConfig.cartButton.text);let t=document.querySelector(".cart-total");if(t&&"before"===window.cartConfig.currency.position)t.style.setProperty("--currency-symbol",`"${window.cartConfig.currency.symbol}"`);else if(t&&"after"===window.cartConfig.currency.position){let i=document.createElement("style");i.textContent=`
            .left-section .cart-total::before { content: none !important; }
            .left-section .cart-total::after { content: "${window.cartConfig.currency.symbol}"; margin-left: 2px; }
        `,document.head.appendChild(i)}let n=document.getElementById("form");n&&!n.classList.contains("active")&&(n.style.visibility="hidden",setTimeout(function(){n.style.visibility="visible"},200)),window.cartConfig.orderBumps.forEach((e,t)=>{e.enabled&&e.productId&&function e(t){let i=document.querySelector(`.product[data-id="${t}"]`);i&&(i.style.visibility="collapse",i.style.opacity="0",window.cartConfig.debugMode&&console.log(`üôà Product ${t} hidden from table`))}(e.productId)}),function e(){let t=document.querySelectorAll(".product select.quantity");t.forEach(e=>{"undefined"!=typeof $&&$.fn.select2&&$(e).on("change.select2",function(){setTimeout(()=>{P()},100)}),e.addEventListener("change",function(){setTimeout(()=>{P()},100)}),e.addEventListener("input",function(){setTimeout(()=>{P()},100)})});let i=document.querySelector(".total-quantity");if(i){let n=new MutationObserver(()=>{P()});n.observe(i,{childList:!0,characterData:!0,subtree:!0}),function e(){let t=document.querySelectorAll(".subtotal-price");t.forEach(e=>{let t=new MutationObserver(()=>{P()});t.observe(e,{childList:!0,characterData:!0,subtree:!0})});let i=document.querySelector(".total-price");if(i){let n=new MutationObserver(()=>{P()});n.observe(i,{childList:!0,characterData:!0,subtree:!0})}let r=document.querySelector(".total-amount");if(r){let o=new MutationObserver(()=>{P()});o.observe(r,{childList:!0,characterData:!0,subtree:!0})}window.cartConfig.debugMode&&console.log("\uD83D\uDCB0 Price monitoring setup complete")}(),window.cartConfig.debugMode&&console.log("\uD83D\uDC40 Quantity monitoring setup complete")}}();let{targetElement:r,insertMethod:o}=f();r&&(window.cartConfig.orderBumps.forEach((e,t)=>{if(!e.enabled)return;let i=p(e);if(!i){console.error(`Order bump ${t} skipped due to invalid config`);return}let n=m(i.title,i),a=m(i.description,i),c=`order-bump-${t}`,d=`
                <div class="order-bump-container" data-bump-index="${t}">
                    <div class="order-bump-badge">
                        <i class="fa ${i.badgeIcon}"></i> ${i.badgeText}
                    </div>
                    <div class="order-bump-content">
                        <label class="order-bump-checkbox">
                            <input type="checkbox" id="${c}-checkbox" class="order-bump-input" value="1" data-bump-index="${t}">
                            <span class="checkmark"></span>
                            <div class="order-bump-text">
                                <div class="order-bump-title">${n}</div>
                                <div class="order-bump-description">${a}</div>
                            </div>
                        </label>
                        <div class="order-bump-quantity-wrapper" id="${c}-quantity-wrapper" style="display: none;">
                            <div class="bump-quantity-left">
                                <div class="quantity-label">${i.quantityLabel}</div>
                                <div class="quantity-selector">
                                    <button type="button" class="qty-btn qty-minus" data-bump-index="${t}">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <input type="number" class="qty-input" id="${c}-qty-input" value="${i.defaultQuantity}" min="${i.minQuantity}" max="${i.maxQuantity}" readonly data-bump-index="${t}">
                                    <button type="button" class="qty-btn qty-plus" data-bump-index="${t}">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="quantity-total">
                                <span class="bump-total-price" id="${c}-total-price">${l(i.discountedPrice)}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;r.insertAdjacentHTML(o,d)}),setTimeout(()=>{document.querySelectorAll(".order-bump-input").forEach(e=>{let t=parseInt(e.getAttribute("data-bump-index")),i=p(window.cartConfig.orderBumps[t]);if(!i)return;let n=`order-bump-${t}`,r=document.getElementById(`${n}-quantity-wrapper`),o=document.getElementById(`${n}-qty-input`),a=document.getElementById(`${n}-total-price`),c=document.querySelector(`.qty-minus[data-bump-index="${t}"]`),d=document.querySelector(`.qty-plus[data-bump-index="${t}"]`);function u(){let n=parseInt(o.value)||1,r=i.discountedPrice*n;a.textContent=l(r),e.checked&&g(t,n),window.cartConfig.debugMode&&console.log(`Order bump ${t} total: ${l(r)}`)}function s(){let e=parseInt(o.value)||1;c&&(c.disabled=e<=i.minQuantity),d&&(d.disabled=e>=i.maxQuantity)}s(),e.addEventListener("change",function(){if(this.checked){r.style.display="flex";let e=parseInt(o.value)||i.defaultQuantity;if(setTimeout(()=>{g(t,e)},100),u(),i.productId){let n=parseInt(o.value)||i.defaultQuantity;!function e(t,i){let n=document.querySelector(`.product[data-id="${t}"]`);if(n){n.style.visibility="visible",n.style.opacity="1";let r=n.querySelector("td:first-child");if(r&&!r.querySelector(".order-bump-badge-table")){let o=document.createElement("span");o.className="order-bump-badge-table",o.textContent=window.cartConfig.bumpsBadge.text,r.insertBefore(o,r.firstChild),r.insertBefore(document.createTextNode(" "),o.nextSibling)}let a=n.querySelector(".quantity");a&&(a.disabled=!0,a.style.opacity="0.6",a.style.cursor="not-allowed"),window.cartConfig.debugMode&&console.log(`üëÅÔ∏è Product ${t} shown as Order Bump`)}}(i.productId,n)}window.cartConfig.debugMode&&console.log(`‚úÖ Order bump ${t} selected:`,i.productName)}else{var a;r.style.display="none",g(a=t,0),i.productId&&function e(t){let i=document.querySelector(`.product[data-id="${t}"]`);if(i){i.style.visibility="collapse",i.style.opacity="0";let n=i.querySelector(".order-bump-badge-table");if(n){n.remove();let r=i.querySelector("td:first-child").childNodes[0];r&&3===r.nodeType&&""===r.textContent.trim()&&r.remove()}let o=i.querySelector(".quantity");o&&(o.disabled=!1,o.style.opacity="1",o.style.cursor="pointer"),window.cartConfig.debugMode&&console.log(`üîÑ Product ${t} reset and hidden`)}}(i.productId),window.cartConfig.debugMode&&console.log(`‚ùå Order bump ${t} deselected`)}}),c&&c.addEventListener("click",function(e){e.preventDefault();let t=parseInt(o.value)||1;t>i.minQuantity&&(o.value=t-1,u(),s())}),d&&d.addEventListener("click",function(e){e.preventDefault();let t=parseInt(o.value)||1;t<i.maxQuantity&&(o.value=t+1,u(),s())}),o&&o.addEventListener("change",function(){let e=parseInt(this.value)||1;e<i.minQuantity&&(e=i.minQuantity),e>i.maxQuantity&&(e=i.maxQuantity),this.value=e,u(),s()})}),P()},500),window.cartConfig.debugMode&&console.log("\uD83C\uDF81 Order Bumps loaded:",window.cartConfig.orderBumps.filter(e=>e.enabled).length,"active"))})}();
